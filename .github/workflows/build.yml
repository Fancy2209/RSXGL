on:
    push:
        branches: [ "master", "fix-build" ]
jobs:
  build:
    runs-on: ubuntu-latest
    container: ghcr.io/miigotu/ps3toolchain/ps3dev:submodules
    steps:
      - uses: actions/checkout@v4
      
      - name: Build
        run: |
            touch /var/lib/dpkg/status        
            wget http://security.debian.org/debian-security/pool/updates/main/libx/libxml2/python-libxml2_2.9.4+dfsg1-7+deb10u6_amd64.deb      
            apt update
            apt-get install python2 ./python-libxml2_2.9.4+dfsg1-7+deb10u6_amd64.deb xutils-dev nvidia-cg-toolkit -y

            PYTHON=/usr/bin/python2 ./configure
            make -j$(nproc)
